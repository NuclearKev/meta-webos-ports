From 4e21cf2a051e4d071a24f44e8ebaa2ef761cc8f5 Mon Sep 17 00:00:00 2001
From: Martin Jansa <Martin.Jansa@gmail.com>
Date: Fri, 10 Jun 2016 13:47:17 +0200
Subject: [PATCH 2/2] Fix build with newer toolchain

Change-Id: If5e85b6ca54d9124c3258187e15cbe731d69052c
Signed-off-by: Martin Jansa <Martin.Jansa@gmail.com>
---
 imap/src/commands/SelectFolderCommand.cpp | 2 +-
 imap/src/commands/SyncEmailsCommand.cpp   | 2 +-
 imap/src/parser/SemanticActions.cpp       | 2 +-
 pop/src/PopBusDispatcher.cpp              | 2 +-
 smtp/src/SmtpClient.cpp                   | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/imap/src/commands/SelectFolderCommand.cpp b/imap/src/commands/SelectFolderCommand.cpp
index c8d7eec..5689cb1 100644
--- a/imap/src/commands/SelectFolderCommand.cpp
+++ b/imap/src/commands/SelectFolderCommand.cpp
@@ -183,7 +183,7 @@ void SelectFolderCommand::SelectDone()
 {
 	CommandTraceFunction();
 
-	boost::shared_ptr<FolderSession> folderSession = make_shared<FolderSession>(m_folder);
+	boost::shared_ptr<FolderSession> folderSession = boost::make_shared<FolderSession>(m_folder);
 
 	if(m_responseParser->GetExistsCount() > 0) // -1 means unknown
 		folderSession->SetMessageCount( m_responseParser->GetExistsCount() );
diff --git a/imap/src/commands/SyncEmailsCommand.cpp b/imap/src/commands/SyncEmailsCommand.cpp
index 77f4407..2d1f4d5 100644
--- a/imap/src/commands/SyncEmailsCommand.cpp
+++ b/imap/src/commands/SyncEmailsCommand.cpp
@@ -201,7 +201,7 @@ void SyncEmailsCommand::SearchComplete()
 
 	unsigned int maxSize = ImapConfig::GetConfig().GetMaxEmails();
 
-	m_uidMap = make_shared<UIDMap>(m_allUIDs, folderSession->GetMessageCount(), maxSize);
+	m_uidMap = boost::make_shared<UIDMap>(m_allUIDs, folderSession->GetMessageCount(), maxSize);
 	folderSession->SetUIDMap(m_uidMap);
 
 	// Sort lists
diff --git a/imap/src/parser/SemanticActions.cpp b/imap/src/parser/SemanticActions.cpp
index eee7681..ccabd25 100644
--- a/imap/src/parser/SemanticActions.cpp
+++ b/imap/src/parser/SemanticActions.cpp
@@ -629,7 +629,7 @@ void SemanticActions::envMessageId() {
 }
 
 void SemanticActions::envEndAddress() {
-	EmailAddressPtr address = make_shared<EmailAddress>(m_envelope.m_addressDisplayName, m_envelope.m_addressEmail);
+	EmailAddressPtr address = boost::make_shared<EmailAddress>(m_envelope.m_addressDisplayName, m_envelope.m_addressEmail);
 	m_envelope.GetCurrentAddressList()->push_back(address);
 }
 
diff --git a/pop/src/PopBusDispatcher.cpp b/pop/src/PopBusDispatcher.cpp
index 5e714ae..7d8c08b 100644
--- a/pop/src/PopBusDispatcher.cpp
+++ b/pop/src/PopBusDispatcher.cpp
@@ -668,7 +668,7 @@ PopBusDispatcher::ClientPtr PopBusDispatcher::GetOrCreateClient(MojObject& accou
 	it = m_clients.find(accountId);
 	if (it == m_clients.end()) {
 		MojLogInfo(s_log, "Creating PopClient");
-		shared_ptr<DatabaseInterface> databaseInterface(new MojoDatabase(m_dbClient));
+		boost::shared_ptr<DatabaseInterface> databaseInterface(new MojoDatabase(m_dbClient));
 		client.reset(new PopClient(databaseInterface, this, accountId, &m_service));
 		m_clients[accountId] = client;
 		client->CreateSession();
diff --git a/smtp/src/SmtpClient.cpp b/smtp/src/SmtpClient.cpp
index a21e395..6c1ca4a 100644
--- a/smtp/src/SmtpClient.cpp
+++ b/smtp/src/SmtpClient.cpp
@@ -40,7 +40,7 @@ SmtpClient::ClientStatus::ClientStatus()
 
 }
 
-SmtpClient::SmtpClient(SmtpBusDispatcher* smtpBusDispatcher, shared_ptr<DatabaseInterface> dbInterface, shared_ptr<DatabaseInterface> tempDbInterface, MojLunaService* service)
+SmtpClient::SmtpClient(SmtpBusDispatcher* smtpBusDispatcher, boost::shared_ptr<DatabaseInterface> dbInterface, boost::shared_ptr<DatabaseInterface> tempDbInterface, MojLunaService* service)
 : BusClient(service),
   m_smtpBusDispatcher(smtpBusDispatcher),
   m_dbInterface(dbInterface),
-- 
2.8.4


From b6ca0c1a3005dba9c5fac6a06a9b11d20bfdb48c Mon Sep 17 00:00:00 2001
From: Christophe Chapuis <chris.chapuis@gmail.com>
Date: Thu, 31 Aug 2017 17:26:47 +0000
Subject: [PATCH 16/18] Fix build for Qt5.9

---
 src/core/render_widget_host_view_qt.cpp   | 3 ++-
 src/webengine/api/qquickwebengineview.cpp | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/core/render_widget_host_view_qt.cpp b/src/core/render_widget_host_view_qt.cpp
index 7c6342c..852f7af 100644
--- a/src/core/render_widget_host_view_qt.cpp
+++ b/src/core/render_widget_host_view_qt.cpp
@@ -43,6 +43,7 @@
 #include "browser_accessibility_manager_qt.h"
 #include "browser_accessibility_qt.h"
 #include "chromium_overrides.h"
+#include "web_contents_view_qt.h"
 #include "delegated_frame_node.h"
 #include "qtwebenginecoreglobal_p.h"
 #include "render_widget_host_view_qt_delegate.h"
@@ -777,7 +778,7 @@ void RenderWidgetHostViewQt::GetScreenInfo(content::ScreenInfo* results)
         GetScreenInfoFromNativeWindow(window, results);
     }
     else {
-        GetDefaultScreenInfo(results);
+        content::WebContentsView::GetDefaultScreenInfo(results);
     }
 
     // Support experimental.viewport.devicePixelRatio
diff --git a/src/webengine/api/qquickwebengineview.cpp b/src/webengine/api/qquickwebengineview.cpp
index 1a8b3e7..b141d60 100644
--- a/src/webengine/api/qquickwebengineview.cpp
+++ b/src/webengine/api/qquickwebengineview.cpp
@@ -561,7 +561,7 @@ void QQuickWebEngineViewPrivate::unhandledKeyEvent(QKeyEvent *event)
         QCoreApplication::sendEvent(q->parentItem(), event);
 }
 
-void QQuickWebEngineViewPrivate::adoptNewWindow(QSharedPointer<WebContentsAdapter> newWebContents, WindowOpenDisposition disposition, bool userGesture, const QRect &requestedGeometry, const QStringList &additionalFeaturesStringList)
+void QQuickWebEngineViewPrivate::adoptNewWindow(QSharedPointer<WebContentsAdapter> newWebContents, WindowOpenDisposition disposition, bool userGesture, const QRect &requestedGeometry, const QUrl &targetUrl, const QStringList &additionalFeaturesStringList)
 {
     Q_Q(QQuickWebEngineView);
     QQuickWebEngineNewViewRequest request;
-- 
2.7.4

